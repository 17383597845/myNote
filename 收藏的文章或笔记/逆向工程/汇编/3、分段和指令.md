## 一、分段
### 1、分段：
问题1：8086是16位cpu，最多可以寻址多大的内存？
问题2：8086允许最大内存1M,如何实现寻址到所有内存？
![[Pasted image 20240725233512.png]]
![[Pasted image 20240725233737.png]]
划分段的原则：
	1、段大小可以不是64k
	 2、段与段之间不要重叠
基本认知：
	芯片不会管理，dos系统不会管理。内存分段靠程序员自己。
![[Pasted image 20240725234536.png]]
测试一个物理地址可以由多个逻辑地址表示：
```
-d 064f:1000
-e 064f:1000 
-d 064f:1000

-d 073f:100
-d 004f:7000
多个不同的逻辑地址最终访问到了同一个物理地址
```
问题：物理地址为074f6，可以表示成？:0012吗？
074f6-0012 = 074e4 基地址一定是16的倍数，所以不行。

dos系统中的内存分布：
	dos系统中编程，应用程序可用内存约为600k。
	0A000-A0000
	![[Pasted image 20240725235251.png]]
	### 2、段寄存器
	8086中，段基址都是存放在段寄存器中，段偏移可以用立即数或者通用寄存器指明。
	![[Pasted image 20240725235636.png]]
	在没有做设置的时候，debug默认是四段合一的。
```
	#修改代码段基地址
	r cs 
	063f
	#修改数据段基地址
	r ds
	063f
	d 100
	u 100 l 20
	u 100 l 8
	d 100 l 20
	e 100 aa bb cc dd
	d 100 l 10
	d ss:100 #查看指定段寄存器
	
```
问题：1m的内存寻址需要多少根线？
![[Pasted image 20240726000630.png]]
## 二、寻址

读取操作数的过程可以称之为寻址。
1.立即寻址
	操作数的值存储在指令中的方式称作立即寻址。
	汇编中的整数常量称作立即数。
	 立即数可以是八位数，也可以是十六位数。
	 例子：
```
	 mov al,80H ;将8位立即数80H送入AL寄存器
	 mov ax,1234H;将16位立即数1234H送入AX寄存器 
```
2.寄存器寻址
	操作数的值存储在寄存器的寻址方式称为寄存器寻址。
	这里的寄存器包括通用寄存器和段寄存器。
	例子：
```
MOV CL,DL
MOV AX,BX
```
![[Pasted image 20240726002540.png]]
注意段寄存器之间不能直接赋值，如果想要这样做需要用通用寄存器作为中转
3.直接寻址
操作数在内存里面，通过16位段偏移的寻址方式称作直接寻址。
例子：
```
MOV AL,[1064H]
r
r ds
2000
e 1064 45 78
d 1064 l 20
a
r
a 10a
mov ax,[1064]
r
```
![[Pasted image 20240726003516.png]]


4.寄存器间接寻址
	a.操作数存在内存中，段偏移存在寄存器中的寻址方式称作寄存器间接寻址
	b.可以用于间接寻址的寄存器有BX,BP,SI,DI。
	例子：
```
MOV AX,[SI] ;将SI中的值作为段内偏移，从内存中取出数据赋值给AX
MOV [BX],AL ;将BX中的值作为段内偏移，将AL中的值赋给对应的内存。

a 
mov bx,1064
mov ax, [bx]
r
t
t
```
5.寄存器相对寻址
	a.操作数在内存中，段偏移由【寄存器+立即数】计算得来，这种寻址方式被称为寄存器相对寻址
	b.可以用于寄存器相对寻址的寄存器有BX,BP,SI,DI。
	c.寄存器相对寻址的立即数可以是8位的，也可以是16位的。
![[Pasted image 20240726005234.png]]
例子：
```
MOV [SI+10H],AX

A
MOV [bx+10],ax
r
t

```
![[Pasted image 20240726005440.png]]
6.基址变址寻址
	a.操作数在内存，段偏移由【寄存器+寄存器】计算得来的寻址方式称作基址变址寻址。
	b.可以做基址的寄存器由BX,BP
	c.BX默认DS段，BP默认SS段
	d.可以用作变址的寄存器有SI,DI.
	EA = [(BX),(BP)] + [(SI),(DI)]
```
MOV AX, [BP + SI]
MOV AX, [BP + DI]
MOV AX, [BX + SI]
MOV AX, [BX + DI]
```
7.基址变址相对寻址
	a.操作数在内存中，段偏移由【基址+变址+偏移常量】
	b.可以做基址的寄存器由BX,BP
	c.BX默认DS段，BP默认SS段
	d.可以用作变址的寄存器有SI,DI.
	e.偏移常量可以是8位的，也可以是16位的。
	例子：
```
MOV AX，[BX+DI+1200H]
```
8.比例因子寻址 


## 三、机器码
intel的指令集都是变长指令集（复杂指令集）。arm的指令是定长指令集（精简指令集）。

