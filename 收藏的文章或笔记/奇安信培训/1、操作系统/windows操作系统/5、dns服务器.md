【uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuhttps://cshihong.github.io/2018/10/15/DNS服务器搭建与配置/
https://ghh3809.github.io/2021/03/17/create-dns-server/#
常见网络服务端口
udp：
	53：为dns服务器开放（数据包大小一般不大于512字节）
	dns解析过程：查看浏览器缓存-》查看本地hosts文件-》向本地dns服务器请求解析-》本地dns查看缓存和解析文件-》本地dns查看是否有转发器-》没有转发器，请求根域名服务器-》根域名服务器转给顶级域名服务器-》顶级域名服务器转发二级域名服务器
	查询方式：递归（客户端和本地），迭代（本地dns和根，顶级，二级。。。）
	解析方式：正向（a记录），反向（ptr记录）
	记录：cname（用于记录别名），AAAA（记录ipv6的正向解析记录）
    ![[uuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu
Pasted image 20231101100240.png]]
	dns劫持：让用户访问恶意网页，窃取用户的敏感信息
	dns污染：让用户无法访问目标网站
验证是否被dns污染：nslookup查看本地解析的结果和公网上的解析结果是否一致，如果不一致则更换dns服务器，不要再使用以前的dns服务器。
一、主dns服务器的搭建：
（1）dns服务器需要一个静态的ip地址，所以首先设置一静态ip，注意：首选dns就设置为自己的ip
（2）
添加dns组件：控制面板——》添加或删除——》添加或删除组件——》网络服务——》详细信息——》勾选域名系统
配置正向解析：管理工具——》dns——》正向查找区域建立区域（建立区域解析文件）——》主要区域——》区域名称以XX.XX的形式（二级域名形式）——》不允许动态更新（为了安全）——》正向查找区域解析文件创建成功——》右击区域添加主机

主dna和辅dns：
![[Pasted image 20231101111956.png]]
二、辅助dns：区域肯定是建立辅助区域，首选dns地址填写主dns地址
步骤：
安装dns：服务器管理器点击角色——》添加角色——》选择dns服务器——》下一步下一步安装
备份主dns的正向区域：右击正向区域——》新建区域——》辅助区域——》区域名称与需要备份的名称一致——》添加主dns服务器地址
主服务器同意复制：在区域解析文件上右键属性——》区域复制——》允许区域复制，只允许以下服务器，添加辅助dns地址——》通知——》给辅助dns添加通知
辅助dns服务器刷新，复制成功。
三、转发器配置（当不能解析域名时，则将请求向转发器的dns转发）：
右键服务器图标——》属性——》转发器——》写入要转发的二级域——》输入要转发给的dns地址——》应用

作业：
![[Pasted image 20231101113857.png]]